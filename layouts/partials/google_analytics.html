<script>
(function() {
const gtagId = 'G-LGYK5V1CTV'; // Google Analytics ID
const clarityId = 'orwqd1fgew'; // Microsoft Clarity ID

// Function to safely load both tracking scripts
function loadTrackingScripts() {
if (window.trackingLoaded) return; // Prevent multiple loads
window.trackingLoaded = true;

// Load Google Analytics script
const gtagScript = document.createElement('script');
gtagScript.async = true;
gtagScript.src = `https://www.googletagmanager.com/gtag/js?id=${gtagId}`;
document.head.appendChild(gtagScript);

gtagScript.onload = () => {
try {
window.dataLayer = window.dataLayer || [];
function gtag() { dataLayer.push(arguments); }
dataLayer.push({ 'event': 'gtm.js', 'gtm.start': new Date().getTime() });
gtag('js', new Date());
gtag('config', gtagId);
gtag('event', 'page_view', { 'page_path': window.location.pathname });
} catch (e) {
console.error('Error initializing Google Analytics:', e);
}
};

// Check if clarityId is valid before loading Clarity
if (clarityId && typeof clarityId === 'string' && clarityId.trim()) {
try {
// Load Microsoft Clarity script
(function(c, l, a, r, i, t, y) {
c[a] = c[a] || function() { (c[a].q = c[a].q || []).push(arguments) };
t = l.createElement(r);
t.async = 1;
t.src = "https://www.clarity.ms/tag/" + i;
y = l.getElementsByTagName(r)[0];
y.parentNode.insertBefore(t, y);
})(window, document, "clarity", "script", clarityId);
} catch (e) {
console.error('Error loading Microsoft Clarity:', e);
}
} else {
console.error('Invalid or missing Microsoft Clarity ID:', clarityId);
}
}

// Load both scripts after 4 seconds OR on user interaction
setTimeout(loadTrackingScripts, 4000);
document.addEventListener('scroll', loadTrackingScripts, { once: true });
document.addEventListener('mousemove', loadTrackingScripts, { once: true });
document.addEventListener('touchstart', loadTrackingScripts, { once: true });

})();
</script>